\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{console}[2014/06/05 Console]

\RequirePackage{listings}
\RequirePackage[usenames, dvipsnames]{color}
\RequirePackage{keycommand}

\DeclareOption{uselinenumbers}{
	\lstset{
		numbers=left,
		numberstyle=\footnotesize,
		stepnumber=1,
		numbersep=5pt
	}
}

\DeclareOption{framed}{
	\lstset{
		frame=single
	}
}

\ProcessOptions\relax

\renewcommand{\lstlistingname}{CÃ³digo}

\lstset{%
	basicstyle=\footnotesize,       % the size of the fonts that are used for the code
	backgroundcolor=\color{black},  % choose the background color. You must add \usepackage{color}
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=2,
	captionpos=b,
	breaklines=true,
	breakatwhitespace=false,
	escapeinside={\%*}{*)}
}

\lstdefinelanguage{Console}{
	keywords={},
	ndkeywords={\$, \#},
	morestring=[b]',
	morestring=[b]"
}

\newkeycommand\setcodelanguage[label=,caption=][1]{%
	\lstset{%
		language=#1,
		commentstyle=\color{OliveGreen}\ttfamily,
		stringstyle=\color{BurntOrange}\ttfamily,
		ndkeywordstyle=\color{Cerulean}\bfseries,
		identifierstyle=\color{White},
		keywordstyle=\color{Blue}\bfseries,
		float=t
	}
	\ifthenelse { \equal {\commandkey{caption}} {} }{}%
	{\lstset{caption=\commandkey{caption}}}% If not empty
	\ifthenelse { \equal {\commandkey{label}} {} }{}%
	{\lstset{label=\commandkey{label}}}% If not empty
}

\lstnewenvironment{consolecode}[1][]
{\setcodelanguage[#1]{Console}}
{}

\endinput